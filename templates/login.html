<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Sign in Â· ChecoType</title>
    <script>
      (() => {
        try {
          const storedTheme = localStorage.getItem("typing-theme");
          const theme =
            storedTheme === "dark" || storedTheme === "light"
              ? storedTheme
              : window.matchMedia("(prefers-color-scheme: dark)").matches
                ? "dark"
                : "light";
          if (theme === "dark") {
            document.documentElement.classList.add("dark");
          }
        } catch (error) {}
      })();
    </script>
    <script>
      window.tailwind = { config: { darkMode: "class" } };
      tailwind = window.tailwind;
    </script>
    <style>
      html {
        background-color: #ffffff;
      }
      html.dark {
        background-color: #0b1220;
      }
      html.dark body {
        color: #f8fafc;
      }
      html.dark .surface {
        background-color: rgba(15, 23, 42, 0.9);
        border-color: #1f2937;
      }
      html.dark .surface-input {
        background-color: rgba(2, 6, 23, 0.6);
        border-color: #334155;
        color: #f8fafc;
      }
    </style>
    <script src="https://cdn.tailwindcss.com"></script>
  </head>
  <body class="min-h-screen bg-transparent text-slate-900 dark:text-white">
    <main class="mx-auto flex min-h-screen w-full max-w-3xl flex-col justify-center gap-8 px-8 py-12">
      <header class="text-center">
        <p class="text-xs uppercase tracking-[0.3em] text-slate-400 dark:text-slate-500">Welcome back</p>
        <h1 class="mt-3 text-4xl font-semibold tracking-tight">Sign in to ChecoType</h1>
        <p class="mt-3 text-slate-600 dark:text-slate-300">Track your progress and build your personal records.</p>
      </header>

      {% with messages = get_flashed_messages() %}
        {% if messages %}
          <div class="rounded-2xl border border-rose-200 bg-rose-50 px-4 py-3 text-sm text-rose-700 dark:border-rose-900/60 dark:bg-rose-950/30 dark:text-rose-200">
            {{ messages[0] }}
          </div>
        {% endif %}
      {% endwith %}

      <section class="surface rounded-3xl border border-slate-200 bg-slate-100/90 p-8 shadow-sm dark:border-slate-800 dark:bg-slate-900">
        <div class="flex flex-col gap-4">
          <a href="{{ url_for('auth_google') }}" class="flex items-center justify-center gap-3 rounded-full border border-slate-300 bg-white px-5 py-3 text-sm font-semibold text-slate-700 shadow-sm transition hover:bg-slate-50 dark:border-slate-700 dark:bg-slate-900 dark:text-slate-200 dark:hover:bg-slate-800">
            <span>Continue with Google</span>
          </a>
          <div class="flex items-center gap-3 text-xs uppercase tracking-[0.3em] text-slate-400 dark:text-slate-500">
            <span class="h-px flex-1 bg-slate-200 dark:bg-slate-800"></span>
            <span>Or</span>
            <span class="h-px flex-1 bg-slate-200 dark:bg-slate-800"></span>
          </div>
          <form method="post" class="flex flex-col gap-4">
            <label class="flex flex-col gap-2 text-sm font-medium text-slate-600 dark:text-slate-300">
              Email
              <input name="email" type="email" autocomplete="email" required class="surface-input rounded-xl border border-slate-300 bg-slate-300 px-4 py-3 text-base text-slate-900 focus:border-slate-500 focus:outline-none dark:border-slate-700 dark:bg-slate-950/60 dark:text-white dark:focus:border-slate-400" />
            </label>
            <label class="flex flex-col gap-2 text-sm font-medium text-slate-600 dark:text-slate-300">
              Password
              <input name="password" type="password" autocomplete="current-password" required class="surface-input rounded-xl border border-slate-300 bg-slate-300 px-4 py-3 text-base text-slate-900 focus:border-slate-500 focus:outline-none dark:border-slate-700 dark:bg-slate-950/60 dark:text-white dark:focus:border-slate-400" />
            </label>
            <button type="submit" class="rounded-full bg-slate-900 px-6 py-3 text-sm font-semibold text-white shadow hover:bg-slate-800 dark:bg-slate-200 dark:text-slate-950 dark:hover:bg-white">Sign in</button>
          </form>
          <div class="text-right text-xs">
            <a class="font-semibold text-slate-600 hover:text-slate-900 dark:text-slate-300 dark:hover:text-white" href="{{ url_for('reset_password') }}">Forgot password?</a>
          </div>
        </div>
      </section>

      <p class="text-center text-sm text-slate-500 dark:text-slate-400">
        Need an account?
        <a class="font-semibold text-slate-700 hover:text-slate-900 dark:text-slate-200 dark:hover:text-white" href="{{ url_for('signup') }}">Create one</a>
      </p>
    </main>
  </body>
</html>
